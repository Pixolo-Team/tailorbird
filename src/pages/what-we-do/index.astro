---
// TYPES //
import type { ServicesInfo } from "../../types/services";

// CONSTANTS //
import { API_URL } from "../../constants";

// OTHERS //
import Layout from "../../layouts/Layout.astro";

// SECTIONS //
import Hero from "../../sections/what-we-do/Hero.astro";
import Services from "../../sections/who-we-are/Services.astro";
import OurApproach from "../../sections/what-we-do/OurApproach.astro";
import Faq from "../../sections/what-we-do/Faq.astro";
import Tools from "../../sections/what-we-do/Tools.astro";

let servicesInfo: ServicesInfo = { categories: [], services: [] };
let faqInfo = { categories: [], frequently_asked_questions: [] };
try {
  const res = await fetch(API_URL);
  const json = await res.json();
  servicesInfo = json?.data?.services_info ?? { categories: [], services: [] };
  faqInfo = json?.data?.faq_info ?? {
    categories: [],
    frequently_asked_questions: [],
  };
} catch (e) {
  console.error(e);
}
---

<Layout>
  <Hero />
  {servicesInfo && <Services servicesInfo={servicesInfo} showArrow />}
  <OurApproach />
  <Tools />
  {faqInfo && <Faq faqInfo={faqInfo} />}
</Layout>
