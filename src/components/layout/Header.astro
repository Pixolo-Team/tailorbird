---
// IMPORT //
// CONSTANTS //
import { menuItems } from "../../constants";

// OTHERS //
import BrandLogo from "../BrandLogo.astro";
import Hamburger from "../Hamburger.astro";
import Navbar from "../Navbar.astro";
import MobileMenu from "./MobileMenu.astro";

// Normalize a path (removes trailing slash except for "/")
function normalizePath(path: string): string {
  if (path.endsWith("/") && path !== "/") {
    // Remove last slash
    return path.slice(0, -1);
  }
  return path;
}

// Get current path from Astro
const currentPath = normalizePath(Astro.url.pathname);

// Add active to current page path
const navItemWithActive = menuItems.map((item) => {
  const itemPath = normalizePath(item.href);

  // Marks active if path matches
  return {
    ...item,
    active: itemPath === currentPath,
  };
});
---

<!-- Header Component -->
<header class="bg-n-50">
  <div class="container mx-auto flex items-center justify-between px-4 py-5">
    <!-- Logo Wrapper -->
    <div>
      <a href="/">
        <!-- Brand logo component -->
        <BrandLogo variant="default" classes="w-32 md:w-50 lg:w-53" />
      </a>
    </div>
    <div>
      <!-- Navbar component -->
      <Navbar navItems={navItemWithActive} />

      <!-- Hamburger Component -->
      <Hamburger />
    </div>
  </div>

  <!-- Mobile/Tablet Overlay Menu -->
  <MobileMenu navItems={navItemWithActive} />
</header>
